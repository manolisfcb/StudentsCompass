{% extends "base.html" %}
{% set page_title = "Resources Hub" %}
{% set page_description = "Browse curated career courses, guides, and learning resources tailored to students on Student Compass, with filters and quick search." %}
{% block head_extra %}
  <link rel="stylesheet" href="/static/css/style.css">
  <link rel="stylesheet" href="/static/css/resources.css">
{% endblock %}
{% block content %}
  {% include "includes/header.html" %}

  <main class="dashboard-layout">
    {% include "includes/sidebar.html" %}

    <main class="dashboard">
      <div class="resources-container">
        <div class="resources-header">
          <div class="resources-header-row">
            <div>
              <h2>Resources Hub</h2>
              <p>Explore curated, read-only learning resources and career courses.</p>
            </div>
          </div>
        </div>

        <section class="resources-roadmap" aria-label="Resources rollout status">
          <p class="roadmap-eyebrow">Roadmap</p>
          <h3>Access is temporarily staged while we ship the next phase.</h3>
          <div class="roadmap-track">
            <div class="roadmap-step">
              <span>In development</span>
              <small>Core course experiences are being refined.</small>
            </div>
            <div class="roadmap-step">
              <span>Phase unlocking progressively</span>
              <small>Modules will open in controlled waves.</small>
            </div>
            <div class="roadmap-step">
              <span>Currently in build</span>
              <small>Final integration and QA are in progress.</small>
            </div>
          </div>
          {% if locked_notice %}
          <p class="roadmap-note">Course access is currently locked. You can keep browsing the catalog.</p>
          {% endif %}
        </section>

        <div class="filter-bar">
          <button class="filter-chip active" data-category="all">All</button>
          <button class="filter-chip" data-category="career">Career</button>
          <button class="filter-chip" data-category="learning">Learning</button>
          <button class="filter-chip" data-category="professional">Professional</button>
        </div>

        <div class="control-bar">
          <input id="resource-search" type="text" placeholder="Search by title, description or tags..." aria-label="Search resources">
          <select id="resource-sort" aria-label="Sort resources">
            <option value="recent">Most recent</option>
            <option value="name">Name A-Z</option>
            <option value="duration">Shortest duration</option>
          </select>
        </div>

        <div id="resources-grid" class="resources-grid">
          {% for resource in resources %}
          <article
            class="resource-card {% if not resource_detail_access_enabled %}resource-card-locked{% endif %}"
            data-category="{{ (resource.category or '') | lower }}"
            data-title="{{ resource.title }}"
            data-description="{{ resource.description }}"
            data-tags="{{ (resource.tags or []) | join(' ') }}"
            data-created-at="{{ resource.created_at.isoformat() }}"
            data-duration="{{ resource.estimated_duration_minutes or '' }}"
          >
            <div class="resource-icon">{{ resource.icon or 'ðŸ“š' }}</div>
            <h3 class="resource-title">{{ resource.title }}</h3>
            <p class="resource-description">{{ resource.description }}</p>
            <div class="resource-meta">
              <span class="meta-pill">{{ resource.category }}</span>
              {% if resource.level %}<span class="meta-pill">{{ resource.level }}</span>{% endif %}
              {% if resource.estimated_duration_minutes %}<span class="meta-pill">{{ resource.estimated_duration_minutes }} min</span>{% endif %}
            </div>
            <div class="resource-tags">
              {% for tag in resource.tags or [] %}
              <span class="tag">{{ tag }}</span>
              {% endfor %}
            </div>
            {% if resource_detail_access_enabled %}
            <a class="resource-open-btn" href="/resources/{{ resource.id }}">Open course</a>
            {% else %}
            <button class="resource-open-btn resource-open-btn-locked" type="button" disabled aria-disabled="true">Access locked</button>
            {% endif %}
          </article>
          {% endfor %}
        </div>

        <div id="resources-empty" class="empty-state" {% if resources|length > 0 %}style="display:none;"{% endif %}>
          No resources found for this filter.
        </div>
      </div>
    </main>
  </main>

  {% include "includes/footer.html" %}
  <script src="/static/js/resources.js"></script>
{% endblock %}
